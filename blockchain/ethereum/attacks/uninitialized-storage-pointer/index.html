<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Conflux Wiki Team">
        <link rel="canonical" href="https://conflux-wiki.github.io/blockchain/ethereum/attacks/uninitialized-storage-pointer/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Uninitialized Storage Pointer - Conflux Wiki</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../../../static/css/extra.css" rel="stylesheet">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">Conflux Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Start <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../.." class="dropdown-item">简介</a>
</li>
                                    
<li>
    <a href="../../../../usage/" class="dropdown-item">如何使用 Conflux Wiki</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">贡献指南</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../contribute/before-contributing/" class="dropdown-item">贡献之前</a>
</li>
            
<li>
    <a href="../../../../contribute/basic-contribute-approach/" class="dropdown-item">基本贡献方式</a>
</li>
            
<li>
    <a href="../../../../contribute/documentation-requirement/" class="dropdown-item">贡献文档要求</a>
</li>
            
<li>
    <a href="../../../../contribute/translation/" class="dropdown-item">翻译</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../../../discussion/" class="dropdown-item">讨论交流</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../introduction/history/" class="dropdown-item">区块链 历史</a>
</li>
                                    
<li>
    <a href="../../../../introduction/link/" class="dropdown-item">Conflux相关链接</a>
</li>
                                    
<li>
    <a href="../../../../introduction/highlight-time/" class="dropdown-item">重要时刻</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Crypto <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../crypto/introduction/" class="dropdown-item">密码学简介</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">基础数学知识</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/basic/introduction/" class="dropdown-item">基础数学知识</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">古典密码</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/classical/introduction/" class="dropdown-item">古典密码简介</a>
</li>
            
<li>
    <a href="../../../../crypto/classical/monoalphabetic/" class="dropdown-item">单表代换加密</a>
</li>
            
<li>
    <a href="../../../../crypto/classical/polyalphabetic/" class="dropdown-item">多表代换加密</a>
</li>
            
<li>
    <a href="../../../../crypto/classical/others/" class="dropdown-item">其它类型加密</a>
</li>
            
<li>
    <a href="../../../../crypto/classical/summary/" class="dropdown-item">总结</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">流密码</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/streamcipher/intro/" class="dropdown-item">流密码</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">伪随机数生成器</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/streamcipher/prng/intro/" class="dropdown-item">伪随机数生成器介绍</a>
</li>
            
<li>
    <a href="../../../../crypto/streamcipher/prng/csprng/" class="dropdown-item">密码安全伪随机数生成器</a>
</li>
            
<li>
    <a href="../../../../crypto/streamcipher/prng/problem/" class="dropdown-item">题目</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">线性同余生成器</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/streamcipher/lcg/intro/" class="dropdown-item">线性同余生成器</a>
</li>
            
<li>
    <a href="../../../../crypto/streamcipher/lcg/challenge/" class="dropdown-item">题目</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">反馈移位寄存器</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/streamcipher/fsr/intro/" class="dropdown-item">反馈移位寄存器</a>
</li>
            
<li>
    <a href="../../../../crypto/streamcipher/fsr/lfsr/" class="dropdown-item">线性反馈移位寄存器 - LFSR</a>
</li>
            
<li>
    <a href="../../../../crypto/streamcipher/fsr/nfsr/" class="dropdown-item">非线性反馈移位寄存器</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">特殊流密码</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/streamcipher/special/rc4/" class="dropdown-item">RC4</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">块加密</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/introduction/" class="dropdown-item">块加密</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">ARX</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/arx-operations/" class="dropdown-item">ARX: Add-Rotate-Xor</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">DES</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/des/" class="dropdown-item">DES</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">IDEA</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/idea/" class="dropdown-item">IDEA</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">AES</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/aes/" class="dropdown-item">AES</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Simon and Speck</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/simon-speck/" class="dropdown-item">Simon and Speck Block Ciphers</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">分组模式</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/blockcipher/mode/introduction/" class="dropdown-item">分组模式</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/padding/" class="dropdown-item">填充方式</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/ecb/" class="dropdown-item">ECB</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/cbc/" class="dropdown-item">CBC</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/pcbc/" class="dropdown-item">PCBC</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/cfb/" class="dropdown-item">CFB</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/ofb/" class="dropdown-item">OFB</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/ctr/" class="dropdown-item">CTR</a>
</li>
            
<li>
    <a href="../../../../crypto/blockcipher/mode/padding-oracle-attack/" class="dropdown-item">Padding Oracle Attack</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">非对称加密</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/asymmetric/introduction/" class="dropdown-item">介绍</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">RSA</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_theory/" class="dropdown-item">RSA 介绍</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_module_attack/" class="dropdown-item">模数相关攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_e_attack/" class="dropdown-item">公钥指数相关攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_d_attack/" class="dropdown-item">私钥 d 相关攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_coppersmith_attack/" class="dropdown-item">Coppersmith 相关攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_chosen_plain_cipher/" class="dropdown-item">RSA 选择明密文攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_side_channel/" class="dropdown-item">RSA 侧信道攻击</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_pkcs_attack/" class="dropdown-item">Bleichenbacher's attack</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/rsa/rsa_complex/" class="dropdown-item">RSA 复杂题目</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">背包加密</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/asymmetric/knapsack/knapsack/" class="dropdown-item">背包加密</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">离散对数相关</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/asymmetric/discrete-log/discrete-log/" class="dropdown-item">离散对数</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/discrete-log/elgamal/" class="dropdown-item">ElGamal</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/discrete-log/ecc/" class="dropdown-item">ECC</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">格密码</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/asymmetric/lattice/overview/" class="dropdown-item">格概述</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/lattice/introduction/" class="dropdown-item">基本介绍</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/lattice/lattice-reduction/" class="dropdown-item">格基规约算法</a>
</li>
            
<li>
    <a href="../../../../crypto/asymmetric/lattice/cvp/" class="dropdown-item">CVP</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">哈希函数</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/hash/introduction/" class="dropdown-item">哈希函数</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">MD5</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/hash/md5/" class="dropdown-item">MD5</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">SHA1</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/hash/sha1/" class="dropdown-item">SHA1</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">FNV</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/hash/fnv/" class="dropdown-item">Fowler–Noll–Vo hash function</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Hash Attack</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/hash/attack/" class="dropdown-item">Hash Attack</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../../../crypto/hash/complex/" class="dropdown-item">综合题目</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">数字签名</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/signature/introduction/" class="dropdown-item">数字签名</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">RSA 数字签名</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/signature/rsa/" class="dropdown-item">RSA 数字签名</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">ElGamal 数字签名</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/signature/elgamal/" class="dropdown-item">ElGamal</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">DSA 数字签名</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/signature/dsa/" class="dropdown-item">DSA</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">攻击思想总结</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/attack-summary/attack-mode/" class="dropdown-item">简介</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">中间相遇攻击</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/attack-summary/meet-in-the-middle/" class="dropdown-item">中间相遇攻击 - MITM</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">比特攻击</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/attack-summary/bit-attack/" class="dropdown-item">比特攻击</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">证书格式</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../crypto/certificate/introduction/" class="dropdown-item">证书格式</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Development <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../development/introduction/" class="dropdown-item">Conflux应用开发入门</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">生态开发激励</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../development/incentive-guide/" class="dropdown-item">生态激励指南</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">开发工具及相关资源介绍</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../development/tools/" class="dropdown-item">开发工具</a>
</li>
            
<li>
    <a href="../../../../development/resources/" class="dropdown-item">开发资源</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">ConfluxScan教程</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../development/apply-contract-fee/" class="dropdown-item">为合约申请Conflux赞助额度（合约代付）</a>
</li>
            
<li>
    <a href="../../../../development/address-NFT/" class="dropdown-item">NFT查看器教程</a>
</li>
            
<li>
    <a href="../../../../development/register-contract-and-token-display/" class="dropdown-item">如何在Scan上注册合约和代币展示</a>
</li>
            
<li>
    <a href="../../../../development/get-lp-token-address/" class="dropdown-item">查找LP代币的合约地址</a>
</li>
            
<li>
    <a href="../../../../development/internal-transaction/" class="dropdown-item">交易分析</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Portal钱包教程</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../development/portal/" class="dropdown-item">Portal安装配置步骤</a>
</li>
            
<li>
    <a href="../../../../development/portal-setting/" class="dropdown-item">Portal钱包常用功能解析</a>
</li>
            
<li>
    <a href="../../../../development/add-token-to-portal/" class="dropdown-item">添加CRC20代币到Portal的方法与步骤</a>
</li>
            
<li>
    <a href="../../../../development/portal-faucet/" class="dropdown-item">ConfluxPortal切换为测试网领取测试币教程</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ecosystem <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../ecosystem/introduction/" class="dropdown-item">生态介绍</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Conflux基础生态教程</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../ecosystem/wcfx-cfx-exchange/" class="dropdown-item">WCFX与CFX代币互换</a>
</li>
            
<li>
    <a href="../../../../ecosystem/governance/" class="dropdown-item">Staking合约的质押与解质押</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">常见生态介绍及教程</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../ecosystem/tspace/" class="dropdown-item">Tspace 4.0 NFT平台</a>
</li>
            
<li>
    <a href="../../../../ecosystem/nft-box/" class="dropdown-item">NFTBox创新型资产交互平台</a>
</li>
            
<li>
    <a href="../../../../ecosystem/shuttleflow/" class="dropdown-item">Shuttleflow跨链工具</a>
</li>
            
<li>
    <a href="../../../../ecosystem/moonswap/" class="dropdown-item">moonswap生态</a>
</li>
            
<li>
    <a href="../../../../ecosystem/phantom/" class="dropdown-item">Phantom协议</a>
</li>
            
<li>
    <a href="../../../../ecosystem/dan/" class="dropdown-item">炼丹西游</a>
</li>
            
<li>
    <a href="../../../../ecosystem/guguo/" class="dropdown-item">古国序列</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Web <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../web/introduction/" class="dropdown-item">Web 简介</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">SQL 注入</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../web/sqli/" class="dropdown-item">SQL 注入</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">XSS 跨站脚本攻击</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../web/xss/" class="dropdown-item">XSS</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">CSRF 跨站请求伪造</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../web/csrf/" class="dropdown-item">CSRF</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">SSRF 服务端请求伪造</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../web/ssrf/" class="dropdown-item">SSRF</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">PHP 代码审计</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../../web/php/php/" class="dropdown-item">PHP 代码审计</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">BlockChain <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../introduction/" class="dropdown-item">BlockChain Security Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Ethereum Security</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../introduction/" class="dropdown-item">Ethereum Overview</a>
</li>
            
<li>
    <a href="../../basics/" class="dropdown-item">Ethereum Basics</a>
</li>
            
<li>
    <a href="../../selector-encoding/" class="dropdown-item">Function Selector and Argument Encoding</a>
</li>
            
<li>
    <a href="../../storage/" class="dropdown-item">Ethereum Storage</a>
</li>
            
<li>
    <a href="../../opcodes/" class="dropdown-item">Ethereum Opcodes</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Known Attacks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../introduction/" class="dropdown-item">Introduction</a>
</li>
            
<li>
    <a href="../re-entrancy/" class="dropdown-item">Re-Entrancy</a>
</li>
            
<li>
    <a href="../overflow-underflow/" class="dropdown-item">Integer Overflow and Underflow</a>
</li>
            
<li>
    <a href="../randomness/" class="dropdown-item">Randomness</a>
</li>
            
<li>
    <a href="../airdrop-hunting/" class="dropdown-item">Airdrop Hunting</a>
</li>
            
<li>
    <a href="../shortaddress/" class="dropdown-item">Short Address Attack</a>
</li>
            
<li>
    <a href="../delegatecall/" class="dropdown-item">Delegatecall</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Uninitialized Storage Pointer</a>
</li>
            
<li>
    <a href="../arbitrarywrite/" class="dropdown-item">Arbitrary Writing</a>
</li>
            
<li>
    <a href="../create2/" class="dropdown-item">CREATE2</a>
</li>
            
<li>
    <a href="../jump-oriented-programming/" class="dropdown-item">Jump Oriented Programming</a>
</li>
    </ul>
  </li>
            
<li>
    <a href="../../reverse/" class="dropdown-item">Smart Contract Reverse</a>
</li>
            
<li>
    <a href="../../challenges/" class="dropdown-item">区块链比赛题目</a>
</li>
            
<li>
    <a href="../../resources/" class="dropdown-item">学习资源</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Public Blockchain Security</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../publicblockchain/introduction/" class="dropdown-item">Public Blockchain Security Overview</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">NFT <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../nft/introduction/" class="dropdown-item">初识NFT</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../delegatecall/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../arbitrarywrite/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/conflux-wiki/conflux-wiki/blob/master/docs/zh/docs/blockchain/ethereum/attacks/uninitialized-storage-pointer.md" class="nav-link">Edit on conflux-wiki/conflux-wiki</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#uninitialized-storage-pointer" class="nav-link">Uninitialized Storage Pointer</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">原理</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">例子</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_4" class="nav-link">题目</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_5" class="nav-link">参考</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="uninitialized-storage-pointer">Uninitialized Storage Pointer<a class="headerlink" href="#uninitialized-storage-pointer" title="Permanent link">&para;</a></h1>
<h2 id="_1">原理<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>未初始化的存储指针是指在 EVM 中未进行初始化的 storage 变量，这个变量会指向其他变量的区域，从而更改其他变量的值。</p>
<h2 id="_2">例子<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="_3">典型例子<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>我们来看下面这个例子：</p>
<pre class="highlight"><code class="language-solidity">pragma solidity ^0.4.24;

contract example1{
    uint public a;
    address public b;

    struct Wallet{
        uint value;
        address addr;
    }

    function setValue(uint _a,address _b) public {
        a = _a;
        b = _b;
    }

    function attack(uint _value, address _addr) public {
        Wallet wallet;
        wallet.value = _value;
        wallet.addr = _addr;
    }
}</code></pre>
<p>将这份代码放入 Remix 中，它会提示 Uninitialized Storage Pointer：</p>
<p><img alt="uninitialized-storage-pointer-error" src="../figure/uninitialized-storage-pointer-error.png" /></p>
<p>在我们部署后，首先使用 setValue 函数将 a 和 b 的值分别设为 1 和 0x10aA1C20aD710B823f8c1508cfC12D5d1199117E，可以从交易中发现设置成功：</p>
<p><img alt="uninitialized-storage-pointer-setvalue" src="../figure/uninitialized-storage-pointer-setvalue.png" /></p>
<p>然后我们调用 attack 函数，传入的 _value 和 _addr 值分别为 2 和 0xa3b0D4BBF17F38e00F68Ce73f81D122FB1374ff6，可以从交易中发现 a 和 b 被传入的 _value 和 _addr 值覆盖了：</p>
<p><img alt="uninitialized-storage-pointer-attack" src="../figure/uninitialized-storage-pointer-attack.png" /></p>
<p>这个例子的修复方案是使用 mapping 进行结构体的初始化，并使用 storage 进行拷贝：</p>
<pre class="highlight"><code class="language-solidity">pragma solidity ^0.4.24;

contract example1{
    uint public a;
    address public b;

    struct Wallet{
        uint value;
        address addr;
    }

    mapping (uint =&gt; Wallet) wallets;

    function setValue(uint _a,address _b) public {
        a = _a;
        b = _b;
    }

    function fix(uint _id, uint _value, address _addr) public {
        Wallet storage wallet = wallets[_id];
        wallet.value = _value;
        wallet.addr = _addr;
    }
}</code></pre>
<p>不仅仅是 struct 会遇到这个问题，数组也有同样的问题。我们来看下面的另一个例子：</p>
<pre class="highlight"><code class="language-solidity">pragma solidity ^0.4.24;

contract example2{
    uint public a;
    uint[] b;

    function setValue(uint _a) public {
        a = _a;
    }

    function attack(uint _value) public {
        uint[] tmp;
        tmp.push(_value);
        b = tmp;
    }
}</code></pre>
<p>将这份代码放入 Remix 中，它也会提示 Uninitialized Storage Pointer：</p>
<p><img alt="uninitialized-storage-pointer-error2" src="../figure/uninitialized-storage-pointer-error2.png" /></p>
<p>在我们部署后，首先使用 setValue 函数将 a 的值设为 1，可以从交易中发现设置成功：</p>
<p><img alt="uninitialized-storage-pointer-setvalue2" src="../figure/uninitialized-storage-pointer-setvalue2.png" /></p>
<p>然后我们调用 attack 函数，传入的 _value 值为 2，可以从交易中发现 a 被传入的 _value值覆盖了：</p>
<p><img alt="uninitialized-storage-pointer-attack2" src="../figure/uninitialized-storage-pointer-attack2.png" /></p>
<p>这个例子的修复方案是在声明局部变量 tmp 的时候对它进行初始化操作：</p>
<pre class="highlight"><code class="language-solidity">pragma solidity ^0.4.24;

contract example2{
    uint public a;
    uint[] b;

    function setValue(uint _a) public {
        a = _a;
    }

    function fix(uint _value) public {
        uint[] tmp = b;
        tmp.push(_value);
    }
}</code></pre>
<h3 id="2019-balsnctf-bank">2019 BalsnCTF Bank<a class="headerlink" href="#2019-balsnctf-bank" title="Permanent link">&para;</a></h3>
<p>以 2019 Balsn CTF 的 Bank 的 WP 作为参考，讲解一下未初始化的存储指针的攻击方式。题目合约的源码如下：
<pre class="highlight"><code class="language-solidity">pragma solidity ^0.4.24;

contract Bank {
    event SendEther(address addr);
    event SendFlag(address addr);

    address public owner;
    uint randomNumber = 0;

    constructor() public {
        owner = msg.sender;
    }

    struct SafeBox {
        bool done;
        function(uint, bytes12) internal callback;
        bytes12 hash;
        uint value;
    }
    SafeBox[] safeboxes;

    struct FailedAttempt {
        uint idx;
        uint time;
        bytes12 triedPass;
        address origin;
    }
    mapping(address =&gt; FailedAttempt[]) failedLogs;

    modifier onlyPass(uint idx, bytes12 pass) {
        if (bytes12(sha3(pass)) != safeboxes[idx].hash) {
            FailedAttempt info;
            info.idx = idx;
            info.time = now;
            info.triedPass = pass;
            info.origin = tx.origin;
            failedLogs[msg.sender].push(info);
        }
        else {
            _;
        }
    }

    function deposit(bytes12 hash) payable public returns(uint) {
        SafeBox box;
        box.done = false;
        box.hash = hash;
        box.value = msg.value;
        if (msg.sender == owner) {
            box.callback = sendFlag;
        }
        else {
            require(msg.value &gt;= 1 ether);
            box.value -= 0.01 ether;
            box.callback = sendEther;
        }
        safeboxes.push(box);
        return safeboxes.length-1;
    }

    function withdraw(uint idx, bytes12 pass) public payable {
        SafeBox box = safeboxes[idx];
        require(!box.done);
        box.callback(idx, pass);
        box.done = true;
    }

    function sendEther(uint idx, bytes12 pass) internal onlyPass(idx, pass) {
        msg.sender.transfer(safeboxes[idx].value);
        emit SendEther(msg.sender);
    }

    function sendFlag(uint idx, bytes12 pass) internal onlyPass(idx, pass) {
        require(msg.value &gt;= 100000000 ether);
        emit SendFlag(msg.sender);
        selfdestruct(owner);
    }

}</code></pre></p>
<p>我们的目标是要执行 emit SendFlag(msg.sender)，很明显不能通过 sendFlag 函数来触发，因为我们肯定不能满足 msg.value &gt;= 100000000 ether。</p>
<p>如果我们仔细观察代码，会发现有两处未初始化的存储指针：</p>
<pre class="highlight"><code class="language-solidity">modifier onlyPass(uint idx, bytes12 pass) {
[...]
    FailedAttempt info; &lt;--
[...]
}

function deposit(bytes12 hash) payable public returns(uint) {
[...]
    SafeBox box; &lt;--
[...]
}</code></pre>
<p>那么我们需要思考如何利用它们。我们首先来看看合约刚创建的时候的 slot 的布局：</p>
<pre class="highlight"><code>-----------------------------------------------------
|     unused (12)     |          owner (20)         | &lt;- slot 0
-----------------------------------------------------
|                 randomNumber (32)                 | &lt;- slot 1
-----------------------------------------------------
|               safeboxes.length (32)               | &lt;- slot 2
-----------------------------------------------------
|       occupied by failedLogs but unused (32)      | &lt;- slot 3
-----------------------------------------------------</code></pre>
<p>onlyPass 中的 FailedAttempt 的布局如下，它会覆盖原先的 slot0 到 slot2 的内容：</p>
<pre class="highlight"><code>-----------------------------------------------------
|                      idx (32)                     |
-----------------------------------------------------
|                     time (32)                     |
-----------------------------------------------------
|          tx.origin (20)      |   triedPass (12)   |
-----------------------------------------------------</code></pre>
<p>deposit 中的 SafeBox 的布局如下，它会覆盖原先的 slot0 到 slot1 的内容：</p>
<pre class="highlight"><code>-----------------------------------------------------
| unused (11) | hash (12) | callback (8) | done (1) |
-----------------------------------------------------
|                     value (32)                    |
-----------------------------------------------------</code></pre>
<p>如果当 FailedAttempt 中的 tx.origin 足够大的时候，就可以覆盖 safeboxes.length 并把它也改成一个足够大的值，这样在调用 withdraw 函数的时候就可以将访问到 failedLogs，我们便可以控制 callback 为任意的内容并控制程序执行流。</p>
<p>那么我们需要控制执行流到什么地方呢？在 opcodes 那节介绍过，跳转指令只能跳转到 JUMPDEST 处，我们需要控制程序执行流跳转到 emit SendFlag(msg.sender) 前的地方，也就是下面所示的 070F 处：</p>
<pre class="highlight"><code>06F6 6A PUSH11 0x52b7d2dcc80cd2e4000000
0702 34 CALLVALUE
0703 10 LT
0704 15 ISZERO
0705 15 ISZERO
0706 15 ISZERO
0707 61 PUSH2 0x070f
070A 57 JUMPI
070B 60 PUSH1 0x00
070D 80 DUP1
070E FD REVERT
070F 5B JUMPDEST &lt;---- here
0710 7F PUSH32 0x2d3bd82a572c860ef85a36e8d4873a9deed3f76b9fddbf13fbe4fe8a97c4a579
0731 33 CALLER
0732 60 PUSH1 0x40
0734 51 MLOAD
0735 80 DUP1
0736 82 DUP3</code></pre>
<p>最后我们来描述一下攻击的具体步骤：</p>
<ul>
<li>寻找一个 address 开头较大的账户，之后的操作都用该账户进行。</li>
<li>由于 failedLogs 是 mapping 加上数组的形式，所以计算 <code>target = keccak256(keccak256(msg.sender||3)) + 2</code> 的值，也就是 failedLogs[msg.sender][0] 中的 tx.origin | triedPass 的 slot 位置。</li>
<li>计算 safeboxes 数组中第一个元素所在的 slot 的位置，也就是 <code>base = keccak256(2)</code>。</li>
<li>计算 target 在 safeboxes 数组中的索引，由于 safeboxes 数组中一个元素会占据两个 slot，所以计算出来为 <code>idx = (target - base) // 2</code>。</li>
<li>判断 (target - base) % 2 是否为 0，如果是则 tx.origin | triedPass 刚好可以覆盖到 unused | hash | callback | done，进而可以控制到 callback；否则返回第一步。</li>
<li>判断 (msg.sender &lt;&lt; (12 * 8)) 是否大于 idx，如果是则 safeboxes 可以访问到 target 处；否则返回第一步。</li>
<li>调用 <code>deposit</code> 函数，设置传入的 hash 值为 0x000000000000000000000000 并附带 1 ether，这样我们便可以设置 safeboxes[0].callback = sendEther。</li>
<li>调用 <code>withdraw</code> 函数，设置传入的 idx 值为 0，pass 值为 0x111111111111110000070f00，由于上一步我们设置了 safeboxes[0].callback = sendEther，那么这一步便会调用 sendEther 函数，进而走到 onlyPass 中的 if 分支中，使得 failedLogs[msg.sender][0] 中的 triedPass 被修改为了我们传入的 pass 值，同时这步操作也修改了 safeboxes.length 为 msg.sender | pass。</li>
<li>调用 <code>withdraw</code> 函数，设置传入的 idx 值为我们在第四步中所计算出的 idx 值，pass 值为 0x000000000000000000000000，那么程序执行流便会跳转到 emit SendFlag(msg.sender) 继续执行，最终目标合约会自毁，攻击成功。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>注：攻击步骤中的 slot 计算规则可以在 Ethereum Storage 节中查看。</p>
</div>
<h2 id="_4">题目<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="balsn-2019">Balsn 2019<a class="headerlink" href="#balsn-2019" title="Permanent link">&para;</a></h3>
<ul>
<li>题目名称 Bank</li>
</ul>
<h3 id="rctf-2020">RCTF 2020<a class="headerlink" href="#rctf-2020" title="Permanent link">&para;</a></h3>
<ul>
<li>题目名称 roiscoin</li>
</ul>
<h3 id="byte-2019">Byte 2019<a class="headerlink" href="#byte-2019" title="Permanent link">&para;</a></h3>
<ul>
<li>题目名称 hf</li>
</ul>
<h3 id="2019">数字经济大赛 2019<a class="headerlink" href="#2019" title="Permanent link">&para;</a></h3>
<ul>
<li>题目名称 cow</li>
<li>题目名称 rise</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>注：题目附件相关内容可至 <a href="https://github.com/ctf-wiki/ctf-challenges/tree/master/blockchain">ctf-challenges/blockchain</a> 仓库寻找。</p>
</div>
<h2 id="_5">参考<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/slowmist/papers/blob/master/Solidity_Unintialised_Storage_Pointers_Security_Risk.pdf">以太坊 Solidity 未初始化存储指针安全风险浅析</a></li>
<li><a href="https://x9453.github.io/2020/01/16/Balsn-CTF-2019-Bank/">Balsn CTF 2019 - Bank</a></li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 - 2021 Conflux Wiki Team</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="https://cdnjs.loli.net/ajax/libs/pangu/3.3.0/pangu.min.js" defer></script>
        <script src="../../../../static/js/extra.js" defer></script>
        <script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
